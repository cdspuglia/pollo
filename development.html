<!doctype html>
<html>
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <title>Pollo development guidelines</title>

    <link rel="stylesheet" href="stylesheets/styles.css">
    <link rel="stylesheet" href="stylesheets/pygment_trac.css">
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
</head>
<body>
<div class="wrapper">
    <header>
        <h1>Development guidelines</h1>

        <p>Polling system by <a href="http://www.linkedin.com/groups/Club-degli-Sviluppatori-Puglia-5023541">Club degli
            Sviluppatori Puglia</a></p>

        <p class="view"><a href="https://github.com/cdspuglia/pollo">View the Project on GitHub
            <small>cdspuglia/pollo</small>
        </a></p>
        <nav>
            <ul>
                <li><a href="index.html">Introducing <strong> Pollo</strong></a></li>
                <li><a href="contribute.html">How to <strong>Contribute</strong></a></li>
                <li><a href="development.html">Development <strong>Guidelines</strong></a></li>
            </ul>
        </nav>
    </header>
    <section>
        <h3>Introduction</h3>

        <p>
            Before rushing into coding for Pollo, take 5 minutes to setup your environment read these simple rules and explanation;
            it will save you a lot of time later, when you will dig into the code and open your pull request.
        </p>

        <h3>Getting ready</h3>

        <p>
            Assuming that you have git and PHP 5.4+ installed, clone the repository and run composer:
            <pre><code>$ git clone https://github.com/cdspuglia/pollo.git
$ cd pollo
$ curl http://getcomposer.org/composer.phar > composer.phar
$ php composer.phar install
</code></pre>
        </p>

        <p>
            Pollo use <a href="http://geteventstore.com">EventStore</a> for storing events, so download it and start it from another command line session:
            <pre><code>$ wget http://download.geteventstore.com/binaries/EventStore-OSS-Linux-v3.0.1.tar.gz
$ tar xf EventStore*.tar.gz
$ cd EventStore* && ./clusternode --mem-db 2>&1> eventstore.log &
            </code></pre>
        </p>

        <p>
            Pollo has also an acceptance test suite based on <a href="http://behat.org">Behat</a> and <a href="http://phantomjs.org/">PhantomJS</a>.
            You will need to run the PhantomJS daemon too for the tests to be correctly executed:
            <pre><code>$ phantomjs --webdriver=4444</code></pre>
        </p>

        <p>
            Add pollo.local to your hosts file:
            <pre><code>127.0.0.1 pollo.local</code></pre>
        </p>

        <p>
            Launch the PHP built-in server from your project folder:
            <pre><code>$ php -S pollo.local:8000 -t web/</code></pre>
        </p>

        <p>
            Finally, you can browse to <a href="http://pollo.local:8000">http://pollo.local:8000</a> and check that the homepage is correctly loaded.
            Also, you can run the whole test suite with
        <pre><code>$ bin/phpunit
$ bin/behat</code></pre>
        </p>

        <h3>Standards and adopted practices</h3>
        <p>
            Since different people will work on Pollo, we stick to some simple standards and best practices to
            make everyone easily read and understand each other code:
            <ul>
                <li>PHP 5.5 as major version of the application.</li>
                <li><a href="http://www.php-fig.org/psr/psr-2/">PSR-2</a> for class naming and code formatting.</li>
                <li>Every pull request must be supported by unit tests. We mainly use PHPUnit 4 for that.</li>
                <li>We don't directly commit into master (for those who have permissions). Instead we work on a branch or a fork, then we open a pull request after squashing all commits into one for merging the branch into master.</li>
                <li>If tests are not green, a pull request cannot be merged. Travis is helping us checking on this.</li>
                <li>We apply <i>final</i> keyword <strong>to all classes by default</strong>. Check <a href="http://verraes.net/2014/05/final-classes-in-php/">here</a> to know why.</li>
                <li>PHPDoc annotations should be added to every method and possibly also on classes.</li>
            </ul>
        </p>

        <h3>Architecture</h3>
        <p>
            Pollo is made of several main <i>modules</i> which can be seen as sub-projects of the whole application:
            <ul>
                <li>
                    <strong>Core module</strong>: it contains all the business logic, it's event sourced, domain driven designed and respects CQRS principles.
                </li>
                <li>
                    <strong>Web module</strong>: it's our web application, with frontend, backend and REST API.
                </li>
                <li>
                    <strong>Adapter module</strong>: it behaves like a bridge between the Core and every other modules, translating messages from one to another.
                </li>
            </ul>
        </p>

        <h3>Further documentation</h3>
        <p>
            You can find the documentation for specific modules and arguments here:
            <ul>
                <li>
                    <a href="core_module.html">Core module</a>
                </li>
            </ul>
        </p>
    </section>
    <footer>
        <p>This project is maintained by <a href="https://github.com/cdspuglia">cdspuglia</a></p>

        <p>
            <small>Hosted on GitHub Pages &mdash; Theme by <a href="https://github.com/orderedlist">orderedlist</a>
            </small>
        </p>
    </footer>
</div>
<script src="javascripts/scale.fix.js"></script>

</body>
</html>
